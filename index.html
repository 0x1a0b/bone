<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Bone by go-zoo</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Bone</h1>
        <h2>Lightning Fast HTTP Multiplexer</h2>

        <section id="downloads">
          <a href="https://github.com/go-zoo/bone/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/go-zoo/bone/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/go-zoo/bone" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a id="bone---" class="anchor" href="#bone---" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>bone <a href="http://godoc.org/github.com/go-zoo/bone"><img src="https://godoc.org/github.com/squiidz/bone?status.png" alt="GoDoc"></a> <a href="https://travis-ci.org/go-zoo/bone"><img src="https://travis-ci.org/go-zoo/bone.svg" alt="Build Status"></a> <a href="https://goreportcard.com/report/go-zoo/bone"><img src="https://goreportcard.com/badge/go-zoo/bone" alt="Go Report Card"></a>
</h1>

<h2>
<a id="what-is-bone-" class="anchor" href="#what-is-bone-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What is bone ?</h2>

<p>Bone is a lightweight and lightning fast HTTP Multiplexer for Golang. It support :</p>

<ul>
<li>URL Parameters</li>
<li>REGEX Parameters</li>
<li>Wildcard routes</li>
<li>Router Prefix</li>
<li>Sub Router, <code>mux.SubRoute()</code>, support most standard router (bone, gorilla/mux, httpRouter etc...)</li>
<li>Http method declaration</li>
<li>Support for <code>http.Handler</code> and <code>http.HandlerFunc</code>
</li>
<li>Custom NotFound handler</li>
<li>Respect the Go standard <code>http.Handler</code> interface</li>
</ul>

<p><img src="https://c2.staticflickr.com/2/1070/540747396_5542b42cca_z.jpg" alt="alt tag"></p>

<h2>
<a id="speed" class="anchor" href="#speed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Speed</h2>

<pre><code>- BenchmarkBoneMux        10000000               118 ns/op
- BenchmarkZeusMux          100000               144 ns/op
- BenchmarkHttpRouterMux  10000000               134 ns/op
- BenchmarkNetHttpMux      3000000               580 ns/op
- BenchmarkGorillaMux       300000              3333 ns/op
- BenchmarkGorillaPatMux   1000000              1889 ns/op
</code></pre>

<p>These test are just for fun, all these router are great and really efficient.
 Bone do not pretend to be the fastest router for every job.</p>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<div class="highlight highlight-source-go"><pre>
<span class="pl-k">package</span> main

<span class="pl-k">import</span>(
  <span class="pl-s"><span class="pl-pds">"</span>net/http<span class="pl-pds">"</span></span>

  <span class="pl-s"><span class="pl-pds">"</span>github.com/go-zoo/bone<span class="pl-pds">"</span></span>
)

<span class="pl-k">func</span> <span class="pl-c1">main</span> () {
  <span class="pl-smi">mux</span> <span class="pl-k">:=</span> bone.<span class="pl-c1">New</span>()

  <span class="pl-c">// mux.Get, Post, etc ... takes http.Handler</span>
  mux.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/home/:id<span class="pl-pds">"</span></span>, http.<span class="pl-c1">HandlerFunc</span>(HomeHandler))
  mux.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/profil/:id/:var<span class="pl-pds">"</span></span>, http.<span class="pl-c1">HandlerFunc</span>(ProfilHandler))
  mux.<span class="pl-c1">Post</span>(<span class="pl-s"><span class="pl-pds">"</span>/data<span class="pl-pds">"</span></span>, http.<span class="pl-c1">HandlerFunc</span>(DataHandler))

  <span class="pl-c">// Support REGEX Route params</span>
  mux.<span class="pl-c1">Get</span>(<span class="pl-s"><span class="pl-pds">"</span>/index/#id^[0-9]$<span class="pl-pds">"</span></span>, http.<span class="pl-c1">HandleFunc</span>(IndexHandler))

  <span class="pl-c">// Handle take http.Handler</span>
  mux.<span class="pl-c1">Handle</span>(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>, http.<span class="pl-c1">HandlerFunc</span>(RootHandler))

  <span class="pl-c">// GetFunc, PostFunc etc ... takes http.HandlerFunc</span>
  mux.<span class="pl-c1">GetFunc</span>(<span class="pl-s"><span class="pl-pds">"</span>/test<span class="pl-pds">"</span></span>, <span class="pl-v">Handler</span>)

  http.<span class="pl-c1">ListenAndServe</span>(<span class="pl-s"><span class="pl-pds">"</span>:8080<span class="pl-pds">"</span></span>, mux)
}

<span class="pl-k">func</span> <span class="pl-en">Handler</span>(<span class="pl-v">rw</span> <span class="pl-v">http</span>.<span class="pl-v">ResponseWriter</span>, <span class="pl-v">req</span> *<span class="pl-v">http</span>.<span class="pl-v">Request</span>) {
  <span class="pl-c">// Get the value of the "id" parameters.</span>
  <span class="pl-smi">val</span> <span class="pl-k">:=</span> bone.<span class="pl-c1">GetValue</span>(req, <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)

  rw.<span class="pl-c1">Write</span>([]<span class="pl-k">byte</span>(val))
}
</pre></div>

<h2>
<a id="changelog" class="anchor" href="#changelog" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changelog</h2>

<h4>
<a id="update-10-september-2016" class="anchor" href="#update-10-september-2016" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 10 September 2016</h4>

<ul>
<li>Add support for go1.7 net.Context</li>
</ul>

<h4>
<a id="update-25-september-2015" class="anchor" href="#update-25-september-2015" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 25 September 2015</h4>

<ul>
<li>Add support for Sub router</li>
</ul>

<p>Example :</p>

<div class="highlight highlight-source-go"><pre><span class="pl-k">func</span> <span class="pl-en">main</span>() {
    <span class="pl-smi">mux</span> <span class="pl-k">:=</span> bone.<span class="pl-c1">New</span>()
    <span class="pl-smi">sub</span> <span class="pl-k">:=</span> mux.<span class="pl-c1">NewRouter</span>()

    sub.<span class="pl-c1">GetFunc</span>(<span class="pl-s"><span class="pl-pds">"</span>/test/example<span class="pl-pds">"</span></span>, <span class="pl-c1">func</span>(rw http.<span class="pl-smi">ResponseWriter</span>, req *http.<span class="pl-smi">Request</span>) {
        rw.<span class="pl-c1">Write</span>([]<span class="pl-k">byte</span>(<span class="pl-s"><span class="pl-pds">"</span>From sub router !<span class="pl-pds">"</span></span>))
    })

    mux.<span class="pl-c1">SubRoute</span>(<span class="pl-s"><span class="pl-pds">"</span>/api<span class="pl-pds">"</span></span>, sub)

    http.<span class="pl-c1">ListenAndServe</span>(<span class="pl-s"><span class="pl-pds">"</span>:8080<span class="pl-pds">"</span></span>, mux)
}
</pre></div>

<h4>
<a id="update-26-april-2015" class="anchor" href="#update-26-april-2015" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 26 April 2015</h4>

<ul>
<li>Add Support for REGEX parameters, using <code>#</code> instead of <code>:</code>.</li>
<li>Add Mux method <code>mux.GetFunc(), mux.PostFunc(), etc ...</code>, takes <code>http.HandlerFunc</code> instead of <code>http.Handler</code>.</li>
</ul>

<p>Example :</p>

<div class="highlight highlight-source-go"><pre><span class="pl-k">func</span> <span class="pl-en">main</span>() {
    mux.<span class="pl-c1">GetFunc</span>(<span class="pl-s"><span class="pl-pds">"</span>/route/#var^[a-z]$<span class="pl-pds">"</span></span>, handler)
}

<span class="pl-k">func</span> <span class="pl-en">handler</span>(<span class="pl-v">rw</span> <span class="pl-v">http</span>.<span class="pl-v">ResponseWriter</span>, <span class="pl-v">req</span> *<span class="pl-v">http</span>.<span class="pl-v">Request</span>) {
    bone.<span class="pl-c1">GetValue</span>(req, <span class="pl-s"><span class="pl-pds">"</span>var<span class="pl-pds">"</span></span>)
}</pre></div>

<h4>
<a id="update-29-january-2015" class="anchor" href="#update-29-january-2015" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 29 january 2015</h4>

<ul>
<li>Speed improvement for url Parameters, from <code>~ 1500 ns/op</code> to <code>~ 1000 ns/op</code>.</li>
</ul>

<h4>
<a id="update-25-december-2014" class="anchor" href="#update-25-december-2014" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update 25 december 2014</h4>

<p>After trying to find a way of using the default url.Query() for route parameters, i decide to change the way bone is dealing with this. url.Query() is too slow for good router performance.
So now to get the parameters value in your handler, you need to use
<code>bone.GetValue(req, key)</code> instead of <code>req.Url.Query().Get(key)</code>.
This change give a big speed improvement for every kind of application using route parameters, like ~80x faster ...
Really sorry for breaking things, but i think it's worth it.  </p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>DOC</li>
<li>More Testing</li>
<li>Debugging</li>
<li>Optimisation</li>
</ul>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (git checkout -b my-new-feature)</li>
<li>Write Tests!</li>
<li>Commit your changes (git commit -am 'Add some feature')</li>
<li>Push to the branch (git push origin my-new-feature)</li>
<li>Create new Pull Request</li>
</ol>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>MIT</p>

<h2>
<a id="links" class="anchor" href="#links" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Links</h2>

<ul>
<li>Blog post talking about bone : <a href="http://www.peterbe.com/plog/my-favorite-go-multiplexer">http://www.peterbe.com/plog/my-favorite-go-multiplexer</a>
</li>
</ul>

<h2>
<a id="libs" class="anchor" href="#libs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Libs</h2>

<ul>
<li>Errors dump for Go : <a href="https://github.com/go-zoo/trash">Trash</a>
</li>
<li>Middleware Chaining module : <a href="https://github.com/go-zoo/claw">Claw</a>
</li>
</ul>
      </section>
    </div>

    
  </body>
</html>
